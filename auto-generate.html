<!doctype html>
<html lang="en">
  <head>
    <title>Auto generate hyperlink format</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">  </head>
  <body>
    <div class="container-fluid" style="max-width: 80%;">
        <h1 class="text-center">Auto Generate Hyperlink Tag</h1>
        <a href="./" class="btn btn-danger position-absolute" style="top: 10px;">
            Move to Watch Video
        </a>
        <div id="form-input" class="form-input">
            <div id="form-1" class="row">
                <div class="col-12 row">
                    <div class="col-5 mt-2 pt-1">
                        <div class="form-group">
                            <label for="url">Link</label>
                            <input type="text" name="url" id="url" class="form-control" placeholder="Enter URL" aria-describedby="helpURL">
                            <small id="helpURL" class="text-muted">Enter URL</small>
                        </div>
                    </div>
                    <div class="col-4 mt-2 pt-1">
                         <div class="form-group">
                            <label for="label">Title</label>
                            <input type="text" name="title" id="title" class="form-control" placeholder="Enter Title" aria-describedby="helpTitle">
                            <small id="helpTitle" class="text-muted">Enter Title</small>
                        </div>
                    </div>
                    <div class="col-3 align-self-center">
                        <button type="button" class="btn btn-primary" id="add">+</button>
                    </div>
                </div>
                
                <div class="col-6">
                    <div class="form-group">
                        <label for="label">Description</label>
                        <input type="text" name="description" id="description" class="form-control" placeholder="Enter Description" aria-describedby="HelpDesc">
                        <small id="HelpDesc" class="text-muted">Enter Title</small>
                    </div>
                </div>
               
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label for="radio-group">Select Type List</label>
                    <!-- Radio-button group with 3 options -->
                    <div id="radio-group">
                        <label class="btn btn-outline-primary">
                            <input type="radio" name="options" id="option1" value="ul" autocomplete="off" > List
                        </label>
                        <label class="btn btn-outline-success">
                            <input type="radio" name="options" id="option2" value="ol" autocomplete="off"> Number
                        </label>
                        <label class="btn btn-outline-danger">
                            <input type="radio" name="options" id="option3" autocomplete="off" checked> Non-List
                        </label>
                    </div>  
                </div> 
            </div>
            <div class="col-12">
                <div class="form-group">
                    <label for="button-group">Select Type Format</label>
                    <div id="button-group" class="button">
                        <button type="button" class="btn btn-outline-danger" id="submit">To hyperlink</button>
                        <button type="button" class="btn btn-outline-success" id="submit-spec">To special</button>
                        <button type="button" class="btn btn-outline-primary" id="submit-gg">GG sheet</button>
                    </div>
                </div> 
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <div class="form-group">
                    <label id="label" for="result">Result</label>
                    <textarea name="result" id="result" rows="20" class="form-control"></textarea>
                </div>
            </div>
            


        </div>
    </div>
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js" integrity="sha384-VHvPCCyXqtD5DqJeNxl2dtTyhF78xXNXdkwX1CZeRusQfRKp+tA7hAShOK/B/fQ2" crossorigin="anonymous"></script>
    <!-- CKEditor 5  -->
    <script src="https://cdn.ckeditor.com/ckeditor5/20.0.0/classic/ckeditor.js"></script>
    <script>
        let editor;
        ClassicEditor
            .create( document.querySelector( '#result' ) )
            .then( res => {
                editor = res;
            } )
            .catch( error => {
                console.error( error );
            } );
    </script>
    <script type="text/javascript">
        // declare an array to store all number
        let arrNumber = []; 
        const enter = '&#13;&#10';
        // create a new form-input div dynamically when button "add" is clicked with count of div id = 1 
        $('#add').click(function(){
            let lengthDiv = $('#form-input > div').length + 1;
            for (let i = 1; i < arrNumber.length; i++) {
                const element = arrNumber[i];
                if (element == lengthDiv) {
                    lengthDiv += 1;
                }
            }
             
        const html = `  <div id="form-${lengthDiv}" class="row">
                            <div class="col-12 row">
                                <div class="col-5 mt-2 pt-1">
                                    <div class="form-group">
                                        <label for="url">Link ${lengthDiv}</label>
                                        <input type="text" name="url" id="url" class="form-control" placeholder="Enter URL" aria-describedby="helpURL">
                                        <small id="helpURL" class="text-muted">Enter URL</small>
                                    </div>
                                </div>
                                <div class="col-4 mt-2 pt-1">
                                    <div class="form-group">
                                        <label for="label">Title</label>
                                        <input type="text" name="title" id="title" class="form-control" placeholder="Enter Title" aria-describedby="helpTitle">
                                        <small id="helpTitle" class="text-muted">Enter Title</small>
                                    </div>
                                </div>
                                <div class="col-3 align-self-center">
                                    <button type="button" class="btn btn-danger" id="remove">-</button>
                                </div>
                            </div>
                            
                            <div class="col-6">
                                <div class="form-group">
                                    <label for="label">Description</label>
                                    <input type="text" name="description" id="description" class="form-control" placeholder="Enter Description" aria-describedby="HelpDesc">
                                    <small id="HelpDesc" class="text-muted">Enter Title</small>
                                </div>
                            </div>
                        </div>
            `;
     
        $('#form-input').append(html);
        //push number count to array
        arrNumber.push(lengthDiv);
        });

        // remove a form-input div dynamically when button "remove" is clicked
        $('#form-input').on('click', '#remove', function(e){
            const el = $(this).parent().parent().parent().remove();
            // remove number count from array
            const index = arrNumber.indexOf($(this).parent().parent().parent().attr('id').split('-')[1]);
            
            if (index) {
               return arrNumber.shift(index - 1);
            }
        });

        // get all input value and generate html tag with
        $('#submit').click(function(){
            let html = '';

            $('#form-input > div').each(function(index, el){
                const url = $(this).find('#url').val();
                const label = $(this).find('#title').val();
                const desc = $(this).find('#description').val();
                const radio = $('input[name="options"]:checked').val();
                if (desc != '') {
                    html += '<'+ radio +'><li><a href="'+ url +'">'+ label +'</a>: '+ desc + '</li></'+ radio +'>\n';
                }
                else {
                    html += '<'+ radio +'><li><a href="'+ url +'">'+ label +'</a></li></'+ radio +'>\n';
                }

                editor.setData(html);           
            });
        });

        $('#submit-spec').click(function(){
            let html = '';
            const type = $('input[name=options]:checked').val();
            $('#form-input > div').each(function(index, el){
                const url = $(this).find('#url').val();
                const label = $(this).find('#title').val();
                const desc = $(this).find('#description').val();
                // get length of div id
                if (desc != '') {
                    html += '<li> - ' + '['+ label +']('+ url +'): ' + desc + '</li>\n';
                }
                else {
                    html += '<li> - ' + '['+ label +']('+ url +')</li>\n';
                }
            });
            $('#result').val(html);
            editor.setData(html);           
        });

        $('#submit-gg').click(function(){
            let html = '';
            $('#form-input > div').each(function(index, el){
                const url = $(this).find('#url').val();
                const label = $(this).find('#title').val();
                html += `=HYPERLINK("${ url }";"${ label }")` + '\n';
            });
            $('#result').val(html);
            editor.setData(html);           

        });

    </script>
</body>
</html>